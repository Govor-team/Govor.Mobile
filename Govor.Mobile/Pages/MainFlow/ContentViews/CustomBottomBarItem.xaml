<?xml version="1.0" encoding="utf-8"?>

<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Name="ThisControl"
             x:Class="Govor.Mobile.Pages.MainFlow.ContentViews.CustomBottomBarItem">
    <Grid>
        <Grid.GestureRecognizers>
            <TapGestureRecognizer 
                Command="{Binding TabCommand, Source={x:Reference ThisControl}}" 
                CommandParameter="{Binding TabIndex, Source={x:Reference ThisControl}}"/>
        </Grid.GestureRecognizers>

        <Border InputTransparent="True" StrokeThickness="0" StrokeShape="RoundRectangle 25" Background="#3B4054" Margin="6,8"
                IsVisible="{Binding IsSelected, Source={x:Reference ThisControl}}"/>

        <VerticalStackLayout InputTransparent="True" VerticalOptions="Center" HorizontalOptions="Center" Spacing="2">
            <Image Source="{Binding Icon, Source={x:Reference ThisControl}}" 
                   HeightRequest="28" WidthRequest="28"
                   Aspect="AspectFill"/>
                   
            <Label Text="{Binding Title, Source={x:Reference ThisControl}}" 
                   FontSize="11" 
                   HorizontalOptions="Center" 
                   FontAttributes="{Binding IsSelected, Source={x:Reference ThisControl}, Converter={StaticResource SelectedToFontAttributeConverter}}"
                   TextColor="{Binding IsSelected, Source={x:Reference ThisControl}, Converter={StaticResource SelectedToColorConverter}}"
                   IsVisible="{Binding ShowTitle, Source={x:Reference ThisControl}}"/>
        </VerticalStackLayout>

        <Border InputTransparent="True" StrokeThickness="0" StrokeShape="RoundRectangle 10" Background="#3E7BFA" 
                HeightRequest="20" MinimumWidthRequest="20" HorizontalOptions="Center" VerticalOptions="Start"
                Margin="16,10,0,0" Padding="4,0"
                IsVisible="{Binding HasBadge, Source={x:Reference ThisControl}}">
            <Label Text="{Binding BadgeCount, Source={x:Reference ThisControl}}" 
                   TextColor="White" FontSize="11" FontAttributes="Bold" 
                   HorizontalOptions="Center" VerticalOptions="Center"/>
        </Border>
    </Grid>
</ContentView>